<!--
  Planning Poker App
  HTML Structure with External CSS and app.js
  Sections:
    - Header: App title, brand pill, room code, copy link button
    - Main Left: Join screen + Poker voting screen
    - Main Right: Participants list + Summary
    - Toast: Small floating notification
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Planning Poker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="app">
      <!-- === APP HEADER: Title, branding, room code, copy link === -->
    <header>
      <div class="title-group">
        <div class="title">
          <span id="app-title-text">Planning Poker</span>
          <span class="pill" id="brand-pill">
            <span class="dot-pulse"></span>
            <span id="brand-pill-text">real-time room</span>
          </span>
        </div>
        <div class="subtitle" id="subtitle-text">
          Lightweight sprint refinement poker you can run from a link.
        </div>
      </div>
      <div class="room-indicator">
        <div class="room-code">
          Room
          <span id="room-code-label">—</span>
        </div>
        <button id="copy-link-btn" type="button" disabled>
          Copy share link
        </button>
      </div>
    </header>

    <main>
      <!-- === LEFT SIDE: Join screen + Poker cards === -->
      <section class="card">
        <div class="card-inner">
          <!-- Join Screen (shown before entering a room) -->
          <div id="join-screen">
            <div class="section-title-row">
              <h2>Join or start a room</h2>
              <span class="tag">
                Step 1
              </span>
            </div>

            <p class="muted join-hint">
              Pick a name, then either paste an existing room code or generate a new one.
            </p>

            <div class="field-row" style="margin-top: 6px;">
              <label for="name-input">Your name</label>
              <input id="name-input" type="text" placeholder="e.g. Alex" autocomplete="off" />
            </div>

            <div class="field-row" style="margin-top: 8px;">
              <label for="room-input">Room code</label>
              <input id="room-input" type="text" placeholder="TEAM-1" autocomplete="off" />
              <button id="random-room-btn" class="btn btn-ghost" type="button">
                Random
              </button>
            </div>

            <div class="field-row" style="margin-top: 10px; align-items: center; gap: 12px;">
              <button id="join-room-btn" class="btn btn-primary" type="button">
                Join room
              </button>
              <span id="join-error" style="color:#f97373; font-size:0.8rem; display:none;">There was a problem joining the room</span>
            </div>

            <div class="chip-row">
              <div class="chip">
                <span class="chip-dot"></span>
                Everyone who opens the link with this room code joins the same session.
              </div>
            </div>
          </div>

          <!-- Poker Screen (shown after joining a room) -->
          <div id="poker-screen" class="hidden">
            <p class="muted" style="margin-top: 0; margin-bottom: 6px;">Click a card to vote. Votes stay hidden until someone reveals.</p>
            <div class="cards-grid" id="cards-container"></div>
            <div class="controls-row">
              <div class="controls-row-left">
                <button id="reveal-btn" class="btn btn-secondary" type="button">
                  Reveal votes
                </button>
                <button id="clear-btn" class="btn btn-danger" type="button">
                  Clear for next story
                </button>
              </div>
              <div class="controls-row-right">
                <span class="muted" id="vote-status-label">No vote yet</span>
                <button id="leave-btn" class="btn btn-ghost" type="button">
                  Leave room
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- === RIGHT SIDE: Participants list + Vote summary === -->
      <section class="card">
        <div class="card-inner participants-section">
          <div class="section-title-row">
            <h2>Room participants</h2>
            <span class="muted" id="participant-count-label">0 in room</span>
          </div>

          <ul class="participants-list" id="participants-list"></ul>

          <div class="summary" id="summary-panel">
            <div class="summary-item">
              <div class="summary-label">Votes cast</div>
              <div class="summary-value" id="summary-count">0 / 0</div>
            </div>
            <div class="summary-item">
              <div class="summary-label">Minimum</div>
              <div class="summary-value" id="summary-min">—</div>
            </div>
            <div class="summary-item">
              <div class="summary-label">Maximum</div>
              <div class="summary-value" id="summary-max">—</div>
            </div>
            <div class="summary-item">
              <div class="summary-label">Average</div>
              <div class="summary-value" id="summary-avg">—</div>
            </div>
          </div>

          <p class="footnote">
            <strong>Tip:</strong> Share the link and room code in your sprint refinement invite so everyone can jump in quickly.
          </p>
        </div>
      </section>
    </main>
  </div>

  <!-- === TOAST NOTIFICATION: Appears for copy link etc. === -->
  <div id="toast" class="toast hidden">
    <span class="dot-pulse"></span>
    <span id="toast-message">Copied link</span>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>